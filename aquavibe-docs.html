<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaVibe Docs</title>
    <style>
        :root {
            --bg: #0d1117;
            --surface: #161b22;
            --surface-2: #0f1722;
            --border: #30363d;
            --text: #e6edf3;
            --muted: #8b949e;
            --accent: #2f81f7;
            --success: #238636;
            --code-bg: #010409;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            color: var(--text);
            background: linear-gradient(180deg, #0d1117 0%, #0b1220 100%);
            min-height: 100vh;
            line-height: 1.6;
            padding: 24px;
        }

        .wrap {
            max-width: 980px;
            margin: 0 auto;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 18px;
        }

        .back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .repo-header {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .repo-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 20px;
        }

        .content {
            padding: 24px;
        }

        h1,
        h2 {
            margin-bottom: 12px;
            line-height: 1.3;
        }

        h1 {
            font-size: 32px;
            margin-top: 2px;
        }

        h2 {
            font-size: 22px;
            margin-top: 30px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 8px;
        }

        p {
            margin: 10px 0;
        }

        ul {
            margin: 10px 0 10px 18px;
        }

        li+li {
            margin-top: 6px;
        }

        .intro {
            font-size: 18px;
            color: #d0d7de;
        }

        .repo-highlights {
            border: 1px solid var(--border);
            background: rgba(35, 134, 54, 0.12);
            border-left: 4px solid var(--success);
            border-radius: 8px;
            padding: 12px 14px;
            margin-top: 10px;
        }

        pre {
            margin-top: 12px;
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow-x: auto;
            padding: 14px;
        }

        code {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 13px;
            line-height: 1.55;
        }

        .media {
            margin-top: 12px;
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            background: var(--surface-2);
        }

        .media--phone {
            max-width: 420px;
            margin-left: auto;
            margin-right: auto;
        }

        .media img,
        .media video {
            width: 100%;
            display: block;
            background: #000;
        }

        .media__caption {
            padding: 10px 12px;
            font-size: 13px;
            color: var(--muted);
        }

        .footer {
            margin-top: 30px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            color: var(--muted);
            font-size: 13px;
        }

        @media (max-width: 640px) {
            body {
                padding: 14px;
            }

            .content {
                padding: 16px;
            }

            h1 {
                font-size: 26px;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="topbar">
            <a class="back" href="./index.html" aria-label="Back to portfolio">‚Üê Back to portfolio</a>
        </div>

        <article class="card">
            <header class="repo-header">
                <div class="repo-title">üòéüíß AquaVibe</div>
            </header>

            <section class="content">
                <h1>üòéüíß AquaVibe</h1>
                <p class="intro">Track your wellness journey with AquaVibe, your all-in-one companion for mood, emotion, and hydration tracking üòäüí¶</p>
                <p>The application allows users to set up to 3 daily reminders for consistent tracking and visualize their well-being with beautiful, interactive charts üìà</p>

                <h2>üë®‚Äçüíª Technology Used</h2>
                <ul>
                    <li>SwiftUI</li>
                    <li>HealthKit</li>
                    <li>Charts</li>
                    <li>UserNotifications</li>
                    <li>WishKit</li>
                    <li>StoreKit2, RevenueCat</li>
                    <li>TelemetryDeck</li>
                    <li>AVKit, AVFoundation</li>
                </ul>

                <h2>üìå What Changed In The Repo</h2>
                <div class="repo-highlights">
                    Biggest evolution was shipping AquaVibe from zero to production app during RevenueCat Ship-a-ton, and implementing reliable State of Mind fetching/saving with HealthKit for iOS 18+.
                </div>

                <h2>üé• AquaVibe In Action</h2>
                <div class="media media--phone">
                    <video controls preload="metadata" playsinline>
                        <source src="./assets/aquavibe-demo.m4v" type="video/mp4">
                        <source src="./assets/aquavibe-demo.mov" type="video/quicktime">
                        Your browser does not support embedded video.
                    </video>
                    <div class="media__caption">AquaVibe demo video</div>
                </div>

                <h2>üèÜ Standout Success</h2>
                <p>AquaVibe was created from scratch to a fully working iOS application during RevenueCat Ship-a-ton competition.</p>
                <p>AquaVibe won a Participation Prize in RevenueCat Ship-a-ton competition.</p>
                <p>The most challenging part was understanding State of Mind logic. Documentation and sample projects were not enough, so extensive testing was needed to verify how to correctly fetch and save mood/emotion data to Apple HealthKit.</p>
                <p>State of Mind is also new from iOS 18, so high-quality implementation references were limited.</p>

                <pre><code class="language-swift">func fetchStateOfMindData(forKind kind: HKStateOfMind.Kind) async throws -&gt; [HKStateOfMind] {
        do {
            let stateOfMindType = HKSampleType.stateOfMindType()
            
            // Create a predicate for the specified kind
            let kindPredicate = HKQuery.predicateForStatesOfMind(with: kind)
            
            // Combine with the sample type predicate
            let combinedPredicate = NSCompoundPredicate(andPredicateWithSubpredicates: [
                HKQuery.predicateForSamples(withStart: nil, end: nil, options: .strictStartDate),
                kindPredicate
            ])
            
            let descriptor = HKSampleQueryDescriptor(
                predicates: [.sample(type: stateOfMindType, predicate: combinedPredicate)],
                sortDescriptors: [SortDescriptor(\.startDate, order: .reverse)]
            )
            
            let samples = try await descriptor.result(for: store)
            
            if let stateOfMindSamples = samples as? [HKStateOfMind] {
                print("‚úÖ Fetch done for \(kind)")
                print("Number of samples: \(stateOfMindSamples.count)")
                return stateOfMindSamples
            } else {
                print("‚ùå No HKStateOfMind samples found for \(kind)")
                return []
            }
        } catch {
            print("‚ùå Error fetching state of mind data for \(kind): \(error.localizedDescription)")
            return []
        }
    }</code></pre>

                <div class="media media--phone">
                    <img src="./assets/aquavibe-screenshot.png" alt="AquaVibe app screenshot">
                    <div class="media__caption">AquaVibe UI preview</div>
                </div>

                <h2>‚úÖ Entireness</h2>
                <p>Nevertheless, while creating this mood and water intake reminder app, I have also included:</p>
                <ul>
                    <li>Concurrency</li>
                    <li>Error handling &amp; alerts</li>
                    <li>Text input validation</li>
                    <li>Project organization - MVVM Architecture</li>
                    <li>Published in App Store (09/2024)</li>
                </ul>

                <h2>‚ÑπÔ∏è License</h2>
                <p>The AquaVibe is the property of Marcin Jƒôdrzejak. Unauthorized copying, distribution, or modification of this application is strictly prohibited.</p>

                <p class="footer">¬ÆÔ∏è 2026 All rights reserved by Marcin Jƒôdrzejak.</p>
            </section>
        </article>
    </div>
    <script>
        (function () {
            const back = document.querySelector(".back");
            if (!back) return;

            back.addEventListener("click", function (event) {
                event.preventDefault();

                if (window.opener && !window.opener.closed) {
                    try {
                        window.opener.focus();
                        window.close();
                        setTimeout(function () {
                            if (!window.closed) {
                                try {
                                    window.opener.focus();
                                } catch (error) {
                                }
                                window.location.href = "./index.html";
                            }
                        }, 80);
                        return;
                    } catch (error) {
                    }
                }

                if (window.history.length > 1) {
                    window.history.back();
                    return;
                }

                if (document.referrer) {
                    window.location.href = document.referrer;
                    return;
                }

                window.location.href = "./index.html";
            });
        })();
    </script>
</body>

</html>
